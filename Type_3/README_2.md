## 회귀 분석
- 가설 검정과 함께 제3유형에서 다루어지는 주제입니다.
- 독립변수와 종속변수 간의 관계를 모델링합니다.
- 해당 독립 변수가 한 단위 변화할 때 종속 변수의 변화량을 확인할 수 있습니다.
- 여기서는 로지스틱 회귀분석과 다중 회귀분석을 알아봅니다.
### 🚧 로지스틱 회귀분석
- 이산적인 범주값(ex.참/거짓 또는 1/0)을 가지는 종속 변수를 예측하기 위해 사용되는 기법입니다.(다중 클래스에서는 소프트맥스 함수를 통해 사용할 수 있습니다.)
- 독립 변수들을 사용해서 종속 변수의 로그 오즈(종속 변수가 특정 범주에 속할 확률)를 추정하는 데 사용됩니다.
- 로지스틱 회귀분석의 계수는 로그 오즈비로 해석하면 되므로, 각 독립 변수가 종속 변수에 미치는 영향을 직관적으로 이해하는 데 도움이 됩니다.
- 독립 변수와 종속 변수를 정의한 뒤 from statsmodels.formula.api import logit을 사용하여 모형을 만드는 방법, 
  from sklearn.linear_model import LogisticRegression을 사용하여 모형을 만드는 방법이 있습니다.
- 여기서는 statsmodels.formula.api를 사용하여 모형을 만드는 방법을 알아봅니다.
#### 🚧 로짓 변환
- 로지스틱 회귀의 핵심은 로그 오즈비(log-odds ratio)를 사용하여 확률을 선형 관계로 변환하는 것입니다.
- 오즈비란 두 그룹 간의 오즈를 비교하여 계산되는 값으로, 한 그룹의 오즈를 다른 그룹의 오즈로 나눈 값을 의미합니다. 오즈란 한 범주에 속할 확률과 다른 범주에 속할 확률의 비율입니다.
- 예를 들어, 이진 분류 문제에서 양성 클래스에 속할 확률을 p라고 할 때, 오즈는 p / (1 - p)로 계산됩니다. 
  오즈비는 두 그룹 간의 오즈를 비교하여 계산됩니다.
#### 🚧 회귀계수 -- 오즈비 계산
- logit().fit().params와 np.exp()를 사용합니다.
- 로지스틱 회귀 모델에서 회귀계수(coef. coefficient)는 자연로그 오즈비(log-odds ratio)를 나타냅니다. 즉, 계수는 독립 변수의 값이 한 단위 증가할 때 종속 변수의 자연로그 오즈비가 얼마나 변하는지를 나타냅니다.
- 하지만 자연로그 오즈비는 직관적으로 이해하기가 어렵습니다. 직관적으로 값을 확인하기 위해서는 자연로그를 지수 함수(exponential function)로 바꿔야 합니다.  
ex) 예를 들어, 자연로그 오즈비가 0.5인 경우에 지수함수로 바꾸면 exp(0.5)≈1.65입니다.  
이는 독립변수가 한 단위 증가할 때 사건의 오즈가 1.65배 증가한다는 것을 의미합니다.
#### 🚧 사용 코드  
<회귀계수 구하는 방법>  
1. 첫번째 방법  
result = logit('종속변수 ~ 독립변수1 + 독립변수2 + ...', data=해당데이터셋).fit().summary()  
print(result)  --> 한번에 사용하는 방법  
2. 두번째 방법  
model = logit('종속변수 ~ 독립변수1 + 독립변수2 + ...', data=해당데이터셋).fit()  
print(model.summary())
  
<오즈비 구하는 방법>  
자연로그의 오즈비를 쉽게 확인하기 위해 지수함수로 바꾸어주어야 합니다.  
1. 첫번째 방법  
result2 = logit('종속변수 ~ 독립변수1 + 독립변수2 + ...', data=해당데이터셋).fit().params  
print(np.exp(result2)) --> 이 결과에서 특정 독립변수에 해당하는 값을 직접 찾을 수 있습니다.  
2. 두번째 방법  
print(np.exp(result2['변수이름']))  --> 특정 독립변수의 오즈비를 바로 추출할 수 있습니다.  
#### 🚧 중요 지표 
- 의사결정계수(Pseudo R-squ), 회귀계수(coef), 로그가능도(Log-Likelihood), p_value(P>|z|) :  
  model = logit('종속변수 ~ 독립변수1 + 독립변수2 + ...', data=df).fit()  
  model.summary() 
- AIC : model.aic  
- BIC : model.bic  
- 오즈비 : result2 = model.params[''] 
               np.exp(result2)
- 잔차이탈도 : -2 * model.llf
### 🚩 다중회귀분석
- 연속적인 범주값을 가지는 종속 변수를 예측하기 위해 사용되는 기법입니다.
- 독립 변수들을 사용해서 종속 변수를 예측하는 데 사용됩니다.
- from statsmodels.formula.api import ols를 사용하여 Ordinary Least Squares를 진행합니다.
- Ordinary Least Squares는 가장 작은 제곱합을 찾는 방법입니다.
- 오차의 제곱합이 최소가 되는 파라미터 값을 찾아내어 데이터에 가장 잘 맞는 선형 모델을 구성하는 데 사용됩니다. 
#### 🚩 선형회귀 가정
- 다중회귀분석은 독립 변수와 종속 변수의 관계가 선형임을 가정합니다.
- 독립변수의 변화가 종속변수에 직선적으로 영향을 미친다는 뜻입니다.
- 선형회귀를 사용하여 모델링을 진행합니다.
#### 🚩 회귀계수 
- 다중회귀분석에서의 회귀계수는 연속적인 변화를 직접적으로 나타내며, 회귀계수의 크기와 부호를 통해 해당 독립 변수가 종속 변수에 어떤 영향을 미치는지 해석할 수 있습니다.
- 로지스틱 회귀에서는 로그 오즈비를 나타내는 반면에, 다중회귀분석에서는 회귀계수를 통해 독립 변수가 종속 변수에 미치는 직접적인 영향을 직접적으로 해석할 수 있습니다.
#### 🚩 결정계수(R2)
- 모델이 데이터에 얼마나 잘 적합되었는지를 설명하는 지표입니다.
- 로지스틱 회귀에서는 유사 결정계수가 사용되며 다중회귀에서는 결정계수가 사용됩니다.
#### 🚩 중요 지표
- 결정계수(R-squared), 회귀계수(coef), 로그가능도(Log-Likelihood), p_value(P>|t|) :  
  model = ols('종속변수 ~ 독립변수1 + 독립변수2 + ...', data=df).fit()  
  model.summary()
